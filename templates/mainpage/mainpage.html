{% extends "base.html" %}

{% block nav %}

        <div class="collapse navbar-collapse" id="navbarNavDarkDropdown" style="width: 0px;">
          <ul class="navbar-nav">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                
                {% if search_name == "" %}
                    Терминал
                {% else %}
                    {{search_name}}
                {% endif %} 
              </a>
              <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">
                {% for i in terminal_names %}
                    <li><a class="dropdown-item" href="javascript:addParam('{{ i.attr_name }}', '','', true);">{{ i.attr_name }} : {{ i.attr_count }}</a></li>
                {% endfor %}
              </ul>
            </li>
          </ul>


          <ul class="navbar-nav">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                {% if search_parta == "" %}
                    Партнер
                {% else %}
                    {{ search_parta }}
                {% endif %}
              </a>
              <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">
                <div class="ui-widget" style="width: 150px">
                    <input id="parts" style="width: 300px;" placeholder="Поиск по партнерам" onchange="addParam('',document.getElementById('parts').value,'', false)">
                </div>
                {% for i in terminal_parts %}
                    <li><a class="dropdown-item" href="javascript:addParam('','{{i.attr_name}}','');">{{ i.attr_name }} : {{ i.attr_count }}</a></li>
                {% endfor %}
              </ul>
            </li>
          </ul>


          <ul class="navbar-nav">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                
                {% if search_cpodr == "" %}
                    Отдел
                {% else %}
                    {{search_cpodr}}
                {% endif %} 
              </a>
              <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">
                {% for i in terminal_cpodr %}
                    <li><a class="dropdown-item" href="javascript:addParam('', '','{{ i.attr_name }}', true);">{{ i.attr_name }} : {{ i.attr_count }}</a></li>
                {% endfor %}
              </ul>
            </li>
          </ul>

          {% if zone_check %}
          <ul class="navbar-nav">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Зоны
              </a>
              <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink" style="width: 300px;">
                <form method="POST">
                    {% csrf_token %}
                    <div class="form-check form-switch">
                        {% autoescape on %}
                        <!-- <input type="checkbox" class="form-check-input"  onClick="toggle(this)"> Выбрать все <br/> -->
                        {% for i in terminal_zones %}
                            <li>                        
                                <label><input type="checkbox" name="zones" value= {{i.attr_name}} class="form-check-input" id='{{i.attr_name}}'> {{ i.attr_name }} : {{ i.attr_count }}     </label>
                            </li>
                        {% endfor %}
                        <button type="submit" class="btn btn-outline-success" onclick="zonesChecked()">Применить</button>
                        {% endautoescape %}
                    </div>
                </form>
                
              </ul>
            </li>
          </ul>
          {% endif %}


        </div>

        <a class="btn btn-outline-success" id="filter_button" href="filter/" role="button" >Фильтр</a>
        <a class="btn btn-outline-success" id="filter_button" href="terminals_for_repair/" role="button" >Заявки на ремонт</a>
        <a class="btn btn-outline-success" id="filter_button" href="terminals_for_installation/" role="button" >Заявки на установку</a>
        <a class="btn btn-outline-primary" id="filter_button" href="route/" role="button" >Построить маршрут</a>

        <!-- <a class="btn btn-outline-primary" id="filter_button" href="save/" role="button" >save</a> -->
{% endblock nav %}


{% block content %}


{% endblock content %}

{% block available %}

         try {
        var availableparts = '{{ availablecparta }}'.replace('[(&#x27;','')
        availableparts = availableparts.split("&#x27;,), (&#x27;")
        
        } catch {
            console.log('error availableparts')
        }

{% endblock available %}


{% block clearbutton %}
    <a class="btn btn-outline-danger" href="javascript:clearHref();" role="button" style="float: right;">Сбросить </a>
{% endblock clearbutton %}


